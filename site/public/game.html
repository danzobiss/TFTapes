<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans&display=swap" rel="stylesheet">
    <script src="https://code.iconify.design/1/1.0.6/iconify.min.js"></script>
    <link rel="stylesheet" href="./css/style.css">
    <title>TFTapes</title>
</head>

<body>
    <div class="header">
        <div class="container">
            <img src="./img/logo.svg" alt="Logo do TFTapes" class="logo">
            <h1>TFTapes</h1>
            <ul class="navbar">
                <li><a href="./index.html">HOME</a></li>
                <li><a href="./historia.html">HISTÓRIA</a></li>
                <li><a href="./game.html"><span class="destaque">GAME</a></span>
                </li>
                <li><a href="./dicas.html">DICAS</a></li>
                <li class="dropdown">
                    <p class="dropBtn">ENQUETES</p>
                    <div class="dropdownConteudo">
                        <a href="./arenas.html">ARENAS</a>
                        <a href="./lendas.html">PEQUENAS LENDAS</a>
                    </div>
                </li>
                <div class="separador"></div>
                <li><a id="lblUserNavbar"><span>LOGIN</span><div style="height: 22px; width: 22px; float: right; margin-left: 6px;">
                    <span class="iconify" data-inline="false" data-icon="simple-line-icons:login" style="color: #ffffff; font-size: 24px;"></span>
                </div></a></li>
                <li id="liUsuario" style="display: none;"><a id="lblUsuarioNavbar">USER</a></li>
            </ul>
        </div>
    </div>

    <div class="game">
        <div class="container">
            <h1 class="titulo">Choncc's Hungry</h1>
            <p>O objetivo do jogo é alimentar Choncc o máximo que conseguir antes que o tempo acabe.<br><br>Clique nos botões para oferecer morangos, cenoura ou carne e assim aumentar sua pontuação. Cada alimento enche a barriga do Choncc em valores diferentes
                (morangos: 2pts, cenoura: 15pts, carne: 50pts), mas alguns deles possuem <i>cooldown</i> para serem utilizados novamente.<br><br>Pronto para encher a barriga?</p>
            <div class="jogo">
                <div style="display: flex; justify-content: space-between;">
                    <b>Maior Pontuação: <span id="lblMaxPontos">0</span></b>
                    <b id="lblTimer">Timer</b>
                </div>
                <div class="meio">
                    <button id="btnJogar">Jogar</button>
                    <b id="lblPontos" style="color: #b1925d; display: none;">Pontuação:<br>0</b>
                </div>
                <div class="horizontal">
                    <div class="cardAlimento">
                        <img src="./img/morangos.png" alt="Imagem de Morangos"><br>
                        <b>Morangos</b><br>
                        <button class="btnAlimento btnDesativado" onclick="morangos()" disabled>Oferecer</button>
                    </div>
                    <div class="cardAlimento">
                        <img src="./img/cenoura.png" alt="Imagem de Cenoura"><br>
                        <b>Cenoura</b><br>
                        <button class="btnAlimento btnDesativado" onclick="cenoura()" disabled>Oferecer</button>
                    </div>
                    <div class="cardAlimento">
                        <img src="./img/carne.png" alt="Imagem de Carne"><br>
                        <b>Carne</b><br>
                        <button class="btnAlimento btnDesativado" onclick="carne()" disabled>Oferecer</button>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="footer">
        <div class="container">
            <div class="horizontal">
                <a href="https://www.facebook.com/henrique.danzobaria" class="icones"><span class="iconify" data-inline="false" data-icon="akar-icons:facebook-fill" style="color: #b1925d; font-size: 24px;"></span></a>
                <a href="https://www.instagram.com/danzobiss/" class="icones"><span class="iconify" data-inline="false" data-icon="akar-icons:instagram-fill" style="color: #b1925d; font-size: 24px;"></span></a>
                <a href="https://twitter.com/danzobiss" class="icones"><span class="iconify" data-inline="false" data-icon="akar-icons:twitter-fill" style="color: #b1925d; font-size: 24px;"></span></a>
            </div>
            <p><a href="">Suporte</a> · <a href="./sobre.html">Sobre</a></p>
            <p style="color: #8E8E8E;">&copy; 2021 TFTapes</p>
        </div>
    </div>

    <div id="modalLogin" class="modal">
        <div class="conteudoModal">
            <span class="fechar" id="fecharLogin">&cross;</span>
            <form>
                <h1 class="tituloModal titulo">Login</h1>
                <div class="label-float">
                    <input type="text" placeholder=" " id="txtLogin" />
                    <label>Nome de Usuário</label>
                </div>
                <div class="label-float">
                    <input type="password" placeholder=" " id="txtSenha" />
                    <label>Senha</label>
                </div>
                <a href="./recuperarSenha.html"><b>Esqueceu a Senha?</b></a><br>
                <button id="btnLoginOnLogin" class="btnModal" onclick="logar()">Entrar</button><br>
            </form>
            <button id="btnCadastroOnLogin" class="btnModal btnModalBranco">Não tem uma conta? Cadastre-se!</button>
        </div>
    </div>
    <div id="modalCadastro" class="modal">
        <div class="conteudoModal">
            <span class="fechar" id="fecharCadastro">&cross;</span>
            <form>
                <h1 class="tituloModal titulo">Cadastro</h1>
                <div class="label-float">
                    <input type="text" placeholder=" " id="txtUsuario" />
                    <label>Nome de Usuário</label>
                </div>
                <div class="label-float">
                    <input type="password" placeholder=" " id="txtSenha" />
                    <label>Senha</label>
                </div>
                <div class="label-float">
                    <input type="password" placeholder=" " id="txtConfirmarSenha" />
                    <label>Confirmar Senha</label>
                </div>
                <button id="btnCadastroOnCadastro" class="btnModal" onclick="cadastrar()">Cadastrar</button><br>
            </form>
            <button id="btnLoginOnCadastro" class="btnModal btnModalBranco">Já tem uma conta? Faça seu login!</button>
        </div>
    </div>
</body>

</html>

<script>
    var lbUserNavbar = document.getElementById("lblUserNavbar");

    var modalLogin = document.getElementById("modalLogin");
    var spanLogin = document.getElementById("fecharLogin");
    var btnCadastroOnLogin = document.getElementById("btnCadastroOnLogin");

    var modalCadastro = document.getElementById("modalCadastro");
    var spanCadastro = document.getElementById("fecharCadastro");
    var btnLoginOnCadastro = document.getElementById("btnLoginOnCadastro");

    lblUserNavbar.onclick = () => modalLogin.style.display = "block";

    spanLogin.onclick = () => modalLogin.style.display = "none";
    btnCadastroOnLogin.onclick = () => {
        modalLogin.style.display = "none";
        modalCadastro.style.display = "block";
    }

    spanCadastro.onclick = () => modalCadastro.style.display = "none";
    btnLoginOnCadastro.onclick = () => {
        modalCadastro.style.display = "none";
        modalLogin.style.display = "block";
    }

    window.onclick = function(event) {
        if (event.target == modalLogin) {
            modalLogin.style.display = "none";
        }
        if (event.target == modalCadastro) {
            modalCadastro.style.display = "none";
        }
    }


    //Timer
    function startTimer(duracao, elemento) {
        var timer = duracao,
            minutos, segundos;
        var intervalo = setInterval(function() {
            minutos = parseInt(timer / 60, 10);
            segundos = parseInt(timer % 60, 10);

            minutos = minutos < 10 ? "0" + minutos : minutos;
            segundos = segundos < 10 ? "0" + segundos : segundos;

            elemento.textContent = minutos + ":" + segundos;

            if (--timer < 0) {
                clearInterval(intervalo);
                botoesAlimentos[0].disabled = true;
                botoesAlimentos[0].classList.add("btnDesativado");
                botoesAlimentos[1].disabled = true;
                botoesAlimentos[1].classList.add("btnDesativado");
                botoesAlimentos[2].disabled = true;
                botoesAlimentos[2].classList.add("btnDesativado");

                setTimeout(() => {
                    botoesAlimentos[1].disabled = true;
                    botoesAlimentos[1].classList.add("btnDesativado");
                    botoesAlimentos[2].disabled = true;
                    botoesAlimentos[2].classList.add("btnDesativado");
                }, 5000)

                maxPontos = Number(lblMaxPontos.textContent) < pontos ? pontos : maxPontos;

                document.getElementById("lblMaxPontos").innerHTML = maxPontos
            }
        }, 1000);
    }

    var botoesAlimentos = document.getElementsByClassName("btnAlimento");

    btnJogar.onclick = function() {
        document.getElementById("btnJogar").style.display = "none";
        document.getElementById("lblPontos").style.display = "flex";
        document.getElementById("lblTimer").textContent = "01:00"


        botoesAlimentos[0].disabled = false;
        botoesAlimentos[0].classList.remove("btnDesativado");
        botoesAlimentos[1].disabled = false;
        botoesAlimentos[1].classList.remove("btnDesativado");
        botoesAlimentos[2].disabled = false;
        botoesAlimentos[2].classList.remove("btnDesativado");

        var umMinuto = 59;
        startTimer(umMinuto, document.getElementById("lblTimer"));
    };

    var pontos = 0;

    function atualizarPontos() {
        lblPontos.innerHTML = `Pontuação:<br>${pontos}`;
    }

    function morangos() {
        pontos += 2;
        atualizarPontos();
    }

    function cenoura() {
        pontos += 15;
        atualizarPontos();
        botoesAlimentos[1].disabled = true;
        botoesAlimentos[1].classList.add("btnDesativado");
        setTimeout(() => {
            botoesAlimentos[1].disabled = false
            botoesAlimentos[1].classList.remove("btnDesativado");
        }, 2000);
    }

    function carne() {
        pontos += 50;
        atualizarPontos();
        botoesAlimentos[2].disabled = true;
        botoesAlimentos[2].classList.add("btnDesativado");
        setTimeout(() => {
            botoesAlimentos[2].disabled = false
            botoesAlimentos[2].classList.remove("btnDesativado");
        }, 5000);
    }
</script>